<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "AVIVAS" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= yield :head %>
    
<%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
  <!-- <script src="https://cdn.tailwindcss.com"></script>-->
    
    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">
    
    <%= javascript_importmap_tags %>
  </head>

  <body class="bg-gray-100 text-gray-800">
    <!-- Navbar -->
    <nav class="shadow-lg text-white" style="background-color: #343a40;">
      <div class="container mx-auto px-4">
        <div class="flex justify-between items-center py-3">
          
          <!-- Logo -->
          <div class="flex items-center">
            <a href="/" class="flex items-center" data-turbo="false">
              <img src="/logo.png" alt="AVIVAS" class="h-10">
            </a>
          </div>


          <div class="hidden md:flex md:items-center md:space-x-4">
            <% if logged_in? %>
              <!-- Opciones para empleado -->
              <%= link_to 'Productos', products_path, 
                    class: 'bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition duration-200' %>
              
              <%= link_to 'Ventas', sales_path, 
                    class: 'bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition duration-200' %>

              <% if current_user.role.name == "Administrador" || current_user.role.name == "Gerente" %>
                <%= link_to 'Personal', users_path, 
                      class: 'bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition duration-200' %>
              <% end %>

              <%= link_to 'Editar Perfil', edit_user_path(current_user), 
                    class: 'bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-md text-sm font-medium transition duration-200' %>

              <%= button_to 'Cerrar sesi贸n', logout_path, method: :delete, 
                    class: 'bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition duration-200' %>

            <% elsif customer_signed_in? %>
              <!-- Opciones para cliente -->
              <%= link_to 'Ver mi carrito', cart_path, 
                class: "bg-[#198754] hover:brightness-95 text-white font-semibold py-2 px-4 rounded shadow" %>

              <%= link_to 'Editar Perfil', edit_customer_registration_path, 
                class: "bg-[#ffc107] hover:brightness-95 text-black font-semibold py-2 px-4 rounded shadow" %>

              <%= button_to 'Cerrar sesi贸n', destroy_customer_session_path, method: :delete, 
                class: "bg-[#dc3545] hover:brightness-95 text-white font-semibold py-2 px-4 rounded shadow", data: { turbo: false } %>

            <% else %>
              <!-- Nadie logueado -->
              <%= link_to 'Iniciar sesi贸n empleado', login_path,
                class: "bg-[#6c757d] hover:bg-[#23272b] text-white font-semibold py-2 px-4 rounded shadow", data: { turbo: false } %>

              <%= link_to 'Iniciar sesi贸n cliente', new_customer_session_path, 
                class: "bg-[#0b5ed7] hover:bg-[#23272b] text-white font-semibold py-2 px-4 rounded shadow" %>

              <%= link_to 'Registrarse', new_customer_registration_path, 
                  class: "bg-[#28a745] hover:bg-[#23272b] text-white font-semibold py-2 px-4 rounded shadow" %>
            <% end %>
          </div>
        </div>        
      </div>
    </nav>

    <div class="container mx-auto mt-8 px-4">
      <%= yield %>
    </div>

  </body>
</html>